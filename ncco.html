<script type="text/javascript">
    RED.nodes.registerType('talk',{
        category: 'nexmo',
        color: '#35be8b',
        defaults: {
          text: {required:true},
          template: {},
          voicename: {},
          bargein: {},
          loop: {},
          level: {},
        },
        inputs:1,
        outputs:1,
        icon: "nexmo.png",
        label: "Talk"
    });
</script>
<script type="text/x-red" data-template-name="talk">
    <div class="form-row">
        <label for="node-input-text"><i class="icon-tag"></i>Text</label>
        <input type="text" id="node-input-text" placeholder="text">
    </div>
    
    <div class="form-row">
        <label for="node-input-voicename"><i class="icon-tag"></i>Voice Name</label>
        <input type="text" id="node-input-voicename" placeholder="Kimblerly">
    </div>
    
    <div class="form-row">
        <label for="node-input-bargein"><i class="icon-tag"></i>Barge In</label>
        <input type="checkbox" id="node-input-bargein">
    </div>
    
    <div class="form-row">
        <label for="node-input-loop"><i class="icon-tag"></i>Loop</label>
        <input type="text" id="node-input-loop">
    </div>
    
    <div class="form-row">
        <label for="node-input-level"><i class="icon-tag"></i>Level</label>
        <input type="text" id="node-input-level">
    </div>
</script>

<script type="text/x-red" data-help-name="talk">
<p>Adds a talk action to an NCCO</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt>ncco<span class="property-type">object</span></dt>
        <dd> The output of a previous action, if no <code>msg.ncco</code> exists it will be created  </dd>
    </dl>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.ncco</code> will contain any previous actions provided to the input with the new <code>talk</code> action appended  </dd>
 </dl>

<h3>Details</h3>
The talk action sends synthesized speech to a Conversation.

The text provided in the talk action can either be plain, or formatted using SSML. SSML tags provide further instructions to the text-to-speech synthesiser which allow you to set pitch, pronunciation and to combine together text in multiple languages. SSML tags are XML-based and sent inline in the JSON string.

By default, the talk action is synchronous. However, if you set bargeIn to true you must set an input action later in the NCCO stack. The following NCCO examples shows how to send a synthesized speech message to a Conversation or Call:

<h3>References</h3>
    <ul>
        <li><a href="https://developer.nexmo.com/voice/voice-api/ncco-reference#talk">Nexmo NCCO Reference</a></li>
    </ul>
</script>





<script type="text/javascript">
    RED.nodes.registerType('stream',{
         category: 'nexmo',
        color: '#35be8b',
        defaults: {
          streamurl: {required:true},
          bargein: {},
          loop: {},
          level: {}
        },
        inputs:1,
        outputs:1,
        icon: "nexmo.png",
        label: "Stream"
    });
</script>

<script type="text/x-red" data-template-name="stream">
    <div class="form-row">
        <label for="node-input-streamurl"><i class="icon-tag"></i>Stream URL</label>
        <input type="text" id="node-input-streamurl" placeholder="text">
    </div>
    
    <div class="form-row">
        <label for="node-input-bargein"><i class="icon-tag"></i>Barge In</label>
        <input type="checkbox" id="node-input-bargein">
    </div>
    
    <div class="form-row">
        <label for="node-input-loop"><i class="icon-tag"></i>Loop</label>
        <input type="text" id="node-input-loop">
    </div>
    
    <div class="form-row">
        <label for="node-input-level"><i class="icon-tag"></i>Level</label>
        <input type="text" id="node-input-level">
    </div>
</script>

<script type="text/x-red" data-help-name="stream">
<p>Adds a stream action to an NCCO</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt>ncco<span class="property-type">object</span></dt>
        <dd> The output of a previous action, if no <code>msg.ncco</code> exists it will be created  </dd>
    </dl>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.ncco</code> will contain any previous actions provided to the input with the new <code>stream</code> action appended  </dd>
 </dl>

<h3>Details</h3>
The talk action sends synthesized speech to a Conversation.

The text provided in the talk action can either be plain, or formatted using SSML. SSML tags provide further instructions to the text-to-speech synthesiser which allow you to set pitch, pronunciation and to combine together text in multiple languages. SSML tags are XML-based and sent inline in the JSON string.

By default, the stream action is synchronous. However, if you set bargeIn to true you must set an input action folowing this.

<h3>References</h3>
    <ul>
        <li><a href="https://developer.nexmo.com/voice/voice-api/ncco-reference#stream">Nexmo NCCO Reference</a></li>
    </ul>
</script>

<script type="text/javascript">
    RED.nodes.registerType('input',{
        category: 'nexmo',
        color: '#35be8b',
        defaults: {
          eventurl: {},
          eventmethod: {},
          timeout:{},
          maxdigits:{},
          submitonhash:{}        
        },
        inputs:1,
        outputs:1,
        icon: "nexmo.png",
        label: "Input"
    });
</script>

<script type="text/x-red" data-template-name="input">
    <div class="form-row">
        <label for="node-input-eventurl"><i class="icon-tag"></i>URL</label>
        <input type="text" id="node-input-eventurl" placeholder="text">
    </div>
    
    <div class="form-row">
        <label for="node-input-eventmethod"><i class="fa fa-tasks"></i>Method</label>
        <select type="text" id="node-input-eventmethod" style="width:70%;">
        <option value="get">GET</option>
        <option value="post">POST</option>
         </select>
    </div>
    
    <div class="form-row">
        <label for="node-input-submitonhash"><i class="icon-tag"></i>Submit On Hash</label>
        <input type="checkbox" id="node-input-submitonhash" style="width:70%;">
    </div>
    
    <div class="form-row">
        <label for="node-input-timeout"><i class="icon-tag"></i>Time Out</label>
        <input type="text" id="node-input-timeout">
    </div>
    
    <div class="form-row">
        <label for="node-input-maxdigits"><i class="icon-tag"></i>Max Digits</label>
        <input type="text" id="node-input-maxdigits">
    </div>
    
</script>

<script type="text/x-red" data-help-name="input">
<p>Adds an input action to an NCCO</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt>ncco<span class="property-type">object</span></dt>
        <dd> The output of a previous action, if no <code>msg.ncco</code> exists it will be created  </dd>
    </dl>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.ncco</code> will contain any previous actions provided to the input with the new <code>stream</code> action appended  </dd>
 </dl>

<h3>Details</h3>
The input action collects DTMF input from the caller.

You can use the input action to collect digits input by the person you are calling. This action is synchronous, Nexmo processes the input and forwards it in the parameters sent to the eventURL webhook endpoint you configure in your request, you will need to use the full url including the hostname here of your webhook here.
Your webhook endpoint should return another NCCO that replaces the existing NCCO and controls the Call based on the user input. 

<h3>References</h3>
    <ul>
        <li><a href="https://developer.nexmo.com/voice/voice-api/ncco-reference#input">Nexmo NCCO Reference</a></li>
    </ul>
</script>


<script type="text/javascript">
    RED.nodes.registerType('record',{
        category: 'nexmo',
        color: '#35be8b',
        defaults: {
          format:{},
          split:{},
          channel:{},
          endonsilence:{},
          endonkey:{},
          timeout:{},
          beepstart:{},
          eventurl: {},
          eventmethod:{}
        },
        inputs:1,
        outputs:1,
        icon: "nexmo.png",
        label: "Record"
    });
</script>

<script type="text/x-red" data-template-name="record">
    <div class="form-row">
        <label for="node-input-eventurl"><i class="icon-tag"></i>URL</label>
        <input type="text" id="node-input-eventurl" placeholder="text">
    </div>
    
    <div class="form-row">
        <label for="node-input-eventmethod"><i class="fa fa-tasks"></i>Method</label>
        <select type="text" id="node-input-eventmethod" style="width:70%;">
          <option value="get">GET</option>
          <option value="post">POST</option>
         </select>
    </div>
    
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-tasks"></i>Format</label>
        <select type="text" id="node-input-eventmethod" style="width:70%;">
          <option value="mp3">MP3</option>
          <option value="wav">WAV</option>
          <option value="ogg">OGG</option>
         </select>
    </div>
    
    <div class="form-row">
        <label for="node-input-split"><i class="fa fa-tasks"></i>Split</label>
        <select type="text" id="node-input-split" style="width:70%;">
        <option value="conversation">Conversation</option>
         </select>
    </div>
    
    <div class="form-row">
        <label for="node-input-channel"><i class="icon-tag"></i>Channels</label>
        <input type="number" id="node-input-channel">
    </div>
    
    <div class="form-row">
        <label for="node-input-endonsilence"><i class="icon-tag"></i>End On Silence</label>
        <input type="number" id="node-input-endonsilence">
    </div>
    
    <div class="form-row">
        <label for="node-input-endonkey"><i class="icon-tag"></i>end on key</label>
        <input type="text" id="node-input-endonkey">
    </div>
        
    
    <div class="form-row">
        <label for="node-input-timeout"><i class="icon-tag"></i>Time Out</label>
        <input type="number" id="node-input-timeout">
    </div>
    
    
    <div class="form-row">
        <label for="node-input-beepstart"><i class="icon-tag"></i>Beep Start</label>
        <input type="checkbox" id="node-input-beepstart">
    </div>

</script>

<script type="text/x-red" data-help-name="record">
<p>Adds a record action to an NCCO</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt>ncco<span class="property-type">object</span></dt>
        <dd> The output of a previous action, if no <code>msg.ncco</code> exists it will be created  </dd>
    </dl>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.ncco</code> will contain any previous actions provided to the input with the new <code>stream</code> action appended  </dd>
 </dl>

<h3>Details</h3>
The record action records audio from a caller or records the call.

The record action is asynchronous. Recording starts when the record action is executed in the NCCO and finishes when the synchronous condition in the action is met. That is, endOnSilence, timeOut or endOnKey. If you do not set a synchronous condition, the Voice API immediately executes the next NCCO without recording.


<h3>References</h3>
    <ul>
        <li><a href="https://developer.nexmo.com/voice/voice-api/ncco-reference#record">Nexmo NCCO Reference</a></li>
    </ul>
</script>



<script type="text/javascript">
    RED.nodes.registerType('conversation',{
        category: 'nexmo',
        color: '#35be8b',
        defaults: {
          name: {required:true},
          musiconholdurl:{},
          startonenter:{},
          endonexit:{},
          record:{},
          eventurl:{},
          eventmethod:{}
        },
        inputs:1,
        outputs:1,
        icon: "nexmo.png",
        label: "Conversation"
    });
</script>

<script type="text/x-red" data-template-name="conversation">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="text">
    </div>
    
    <div class="form-row">
        <label for="node-input-musiconholdurl"><i class="icon-tag"></i>Music On Hold URL</label>
        <input type="text" id="node-input-musiconholdurl" placeholder="/url">
    </div>
    
    <div class="form-row">
        <label for="node-input-startonenter"><i class="icon-tag"></i>Start On Enter</label>
        <input type="checkbox" checked  id="node-input-startonenter">
    </div>
 
    <div class="form-row">
        <label for="node-input-endonexit"><i class="icon-tag"></i>End On Exit</label>
        <input type="checkbox"  id="node-input-endonexit">
    </div>   
   
    <div class="form-row">
        <label for="node-input-record"><i class="icon-tag"></i>Record</label>
        <input type="checkbox"  id="node-input-record">
    </div>   
   
    <div class="form-row">
        <label for="node-input-eventurl"><i class="icon-tag"></i>Event URL</label>
        <input type="text" id="node-input-eventurl" placeholder="/url">
    </div>
   
    <div class="form-row">
        <label for="node-input-eventmethod"><i class="fa fa-tasks"></i>Method</label>
        <select type="text" id="node-input-eventmethod" style="width:70%;">
          <option value="get">GET</option>
          <option value="post">POST</option>
         </select>
    </div>
  
</script>

<script type="text/x-red" data-help-name="conversation">
<p>Adds a conversaton action to an NCCO</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt>ncco<span class="property-type">object</span></dt>
        <dd> The output of a previous action, if no <code>msg.ncco</code> exists it will be created  </dd>
    </dl>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.ncco</code> will contain any previous actions provided to the input with the new <code>stream</code> action appended  </dd>
 </dl>

<h3>Details</h3>
The conversation action creates a named conferance.

You can use the conversation action to create standard or moderated conferences. The first person to call the virtual number assigned to the conversation creates it. This action is synchronous, the conversation lasts until the number of participants is 0.


<h3>References</h3>
    <ul>
        <li><a href="https://developer.nexmo.com/voice/voice-api/ncco-reference#conversation">Nexmo NCCO Reference</a></li>
    </ul>
</script>



<script type="text/javascript">
    RED.nodes.registerType('connect',{
        category: 'nexmo',
        color: '#35be8b',
        defaults: {
          endpoint: {value:"number"},
          to: {required: true},
          from: {},
          eventtype: {},
          timeout: {},
          machinedetection:{},
          limit:{},
          eventurl:{},
          eventmethod:{}
        },
        inputs:1,
        outputs:1,
        icon: "nexmo.png",
        label: "Connect"
    });
</script>

<script type="text/x-red" data-template-name="connect">
    
  <div class="form-row">
      <label for="node-input-endpoint"><i class="fa fa-tasks"></i>Endpoint</label>
      <select type="text" id="node-input-endpoint" style="width:70%;">
        <option value="number">Number</option>
        <option value="sip">SIP</option>
        <option value="websocket">Websocket</option>
       </select>
  </div>
  
  <div class="form-row">
      <label for="node-input-to"><i class="icon-tag"></i>To</label>
      <input type="text" id="node-input-to" placeholder="Destination">
  </div>
    
    <div class="form-row">
        <label for="node-input-from"><i class="icon-tag"></i>From</label>
        <input type="number" id="node-input-from" placeholder="From Number">
    </div>
    
    <div class="form-row">
        <label for="node-input-eventtype"><i class="icon-tag"></i>Synchronous (event type)</label>
        <input type="checkbox" value="synchronous" id="node-input-eventtype">
    </div>   
    
    <div class="form-row">
        <label for="node-input-timeout"><i class="icon-tag"></i>Timeout</label>
        <input type="number" id="node-input-timeout" placeholder="60">
    </div>
    
     
    <div class="form-row">
        <label for="node-input-limit"><i class="icon-tag"></i>Limit</label>
        <input type="number" id="node-input-limit" placeholder="7200">
    </div>
    
    
    <div class="form-row">
        <label for="node-input-machinedetection"><i class="fa fa-tasks"></i>Machine Detection</label>
        <select type="text" id="node-input-machinedetection" style="width:70%;">
          <option value="continue">continue</option>
          <option value="hangup">hangup</option>
         </select>
    </div>
    
   
    <div class="form-row">
        <label for="node-input-eventurl"><i class="icon-tag"></i>Event URL</label>
        <input type="text" id="node-input-eventurl" placeholder="/url">
    </div>
   
    <div class="form-row">
        <label for="node-input-eventmethod"><i class="fa fa-tasks"></i>Method</label>
        <select type="text" id="node-input-eventmethod" style="width:70%;">
          <option value="get">GET</option>
          <option value="post">POST</option>
         </select>
    </div>
    
    
    
</script>
<script type="text/x-red" data-help-name="connect">
<p>Adds a connect action to an NCCO</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt>ncco<span class="property-type">object</span></dt>
        <dd> The output of a previous action, if no <code>msg.ncco</code> exists it will be created  </dd>
    </dl>

 <h3>Outputs</h3>
 <dl class="message-properties">
     <dt>ncco<span class="property-type">object</span></dt>
     <dd> <code>msg.ncco</code> will contain any previous actions provided to the input with the new <code>stream</code> action appended  </dd>
 </dl>

<h3>Details</h3>
You can use the connect action to connect a call to endpoints such as phone numbers.

This action is synchronous, after a connect the next action in the NCCO stack is processed. A connect action ends when the endpoint you are calling is busy or unavailable. You ring endpoints sequentially by nesting connect actions.

<h3>References</h3>
    <ul>
        <li><a href="https://developer.nexmo.com/voice/voice-api/ncco-reference#connect">Nexmo NCCO Reference</a></li>
    </ul>
</script>



